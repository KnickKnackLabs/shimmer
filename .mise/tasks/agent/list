#!/usr/bin/env bash
#MISE description="List available agents"

set -e

# Get the caller's directory (where shimmer was invoked from)
CALLER_DIR="${SHIMMER_CALLER_PWD:-$(pwd)}"

echo ""
echo "Available Agents"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

AGENTS_DIR="$CALLER_DIR/agents"
if [ -d "$AGENTS_DIR" ]; then
  echo "  Agent home: $CALLER_DIR"
  echo ""
  for agent_file in "$AGENTS_DIR"/*.txt; do
    if [ -f "$agent_file" ]; then
      agent_name=$(basename "$agent_file" .txt)
      echo "  $agent_name"
    fi
  done
else
  echo "  No agents/ directory in $CALLER_DIR"
  echo "  Run this from an agent home (e.g., fold)"
fi

echo ""
